<!DOCTYPE html>
<html lang="en-US"> 
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, interactive-widget=resizes-visual user-scalable=yes initial-scale=1.0">
    <title>Image Grid and Crop</title>
    
    <link rel="manifest" href="manifest.json" />
    <script type="module" src="piexif.js" ></script>
    <script type="module" src="script.js" defer></script>
    
    <!-- Register the app's service worker. -->
    
    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("sw.js").then(
          (registration) => {
            console.log("Service worker registration successful:", registration);
          },
          (error) => {
            console.error(`Service worker registration failed: ${error}`);
          },
        );
      } else {
        console.error("Service workers are not supported.");
      }
    </script> 

    <link href="style.css" rel="stylesheet">
  </head>
  <body>
  </div>
  <div id="mypopover" popover>
    <div>
      <table>
        <tr>
          <td>
            <label for="row-select">Number of rows</label>
            <select name="rows" id="row-select" selectedIndex="2">
              <option value="">--Choose rows--</option>
              <option value="1">1</option>
              <option value="3">3</option>
              <option value="5">5</option>
              <option value="7">7</option>
              <option value="9">9</option>
            </select>
          </td>
          <td>

          </td>
        </tr>
        <tr>
          <td>
            <fieldset>
              <legend>Select a line thickness</legend>
            
              <div>
                <input type="radio" id="two" name="linethickness" value="2" checked />
                <label for="two">2</label>
              </div>
            
              <div>
                <input type="radio" id="three" name="linethickness" value="3" />
                <label for="three">3</label>
              </div>
            
              <div>
                <input type="radio" id="four" name="linethickness" value="4" />
                <label for="four">4</label>
              </div>
            </fieldset>
            
          </td>
        </tr>
        <tr>
          <td>
            <button id="drawGrid2">Draw</button>
          <!-- </td>
          <td> -->
            <button id="gridConfig">Set Grid</button>
          </td>
        </tr>
      </table>
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Constrain to Aspect Ratio</legend>
            
              <div>
                <input type="checkbox" id="constrain" name="constrain" checked/>
                <label for="constrain">Constrain</label>
              </div>
            
              <div>
                <input type="radio" id="3x2" name="cropratio" value="1.5" checked />
                <label for="3x2" id="3x2Label">3 x 2</label>
              </div>
            
              <div>
                <input type="radio" id="4x3" name="cropratio" value="1.33" />
                <label for="4x3" id="4x3Label">4 x 3</label>
              </div>
            
              <div>
                <input type="radio" id="2x1" name="cropratio" value="2" />
                <label for="2x1" id="2x1Label">2 x 1</label>
              </div>

              <div>
                <input type="radio" id="custom" name="cropratio" value="custom" />
                <label for="custom" id="customLabel">Custom</label>
              </div>
              
              <div>
              <label id="widthByHeight">Width x Height</label>
              </div>

              <div>
              <input type="number" id="width" name="width" min="1" max="100" step="1" value="1">
              <!-- <label for="width">Height</label> -->
              <input type="number" id="height" name="height" min="1" max="100" step="1" value="1">
              </div>
            </fieldset>
          </td>
        </tr>
        <tr>
          <td>
            <button id="drawCrop2">Draw Crop</button>
          <!-- </td>
          <td> -->
            <button id="cropConfig">Set Crop</button>
          </td>
        </tr>
      </table>
    </div>
  </div>  
    <div id="stack" >
    <canvas id="myCanvas">
      <p>Add suitable fallback here.</p>
    </canvas>
    <canvas id="cropCanvas" class="myCropCanvas">
      <p>Add suitable fallback here.</p>
    </canvas>
    </div>
    <div class="centerParent">
      <label class="infoLabel" id="imageInfo">Open an image</label>
      <label class="infoLabel" id="gridInfo">Grid Size: </label>
    </div>
    <footer>
    <div class="buttonBar">
      <table id="buttonTable">
        <tr>
          <td>
            <input
              type="file"
              id="nonFilePicker"
              accept="image/*" 
              style="display:none"/>                 
            <button id="openButton">Open</button>   
          </td>
          <td>
            <button id="gridButton">Grid</button>
          </td>
          <td>
            <button id="cropButton">Crop</button>
          </td>
          <td>
            <button id="saveButton">Save</button>
          </td>
          <td>
            <button id="downloadButton">Download</button>
          </td>
          <td>
            <button popovertarget="mypopover" id="configure">Configure</button>
          </td>
          <!-- <td>
            <label id="imageInfo">Open an image</label>
          </td> -->
      </tr>
    </table>
   </div>
  </footer> 
</html>
